package boleto

import "testing"

func TestLinhaDigitavelToCodigoBarrasCobranca(t *testing.T) {
	testValues := []struct {
		input    string
		expected string
	}{
		{
			input:    "75691434360103372340200149330011690380000250000",
			expected: "75696903800002500001434301033723400014933001",
		},
		{
			input:    "00190000090265697301993624706185166790000243479",
			expected: "00191667900002434790000002656973019362470618",
		},
		{
			input:    "00190000090246420601618160730182558620000077352",
			expected: "00195586200000773520000002464206011816073018",
		},
		{
			input:    "75590003318985076125825434759848289670000378700",
			expected: "75592896700003787000003389850761252543475984",
		},
		{
			input:    "23792028296970594417671052052207167200000324905",
			expected: "23791672000003249052028269705944177105205220",
		},
		{
			input:    "23792028036000702461975002490003167200000309790",
			expected: "23791672000003097902028060007024617500249000",
		},
		{
			input:    "00000000000000000000000000000000000000000000000",
			expected: "00000000000000000000000000000000000000000000",
		},
	}

	for _, tt := range testValues {
		got := linhaDigitavelToCodigoBarrasCobranca(LinhaDigitavel(tt.input))
		result := string(got[:])

		if result != tt.expected {
			t.Fatalf("Expected %q got %q", tt.expected, result)
		}
	}
}

func TestCodigoBarrasToLinhaDigitavelCobranca(t *testing.T) {
	testValues := []struct {
		input    string
		expected string
	}{
		{
			input:    "75696903800002500001434301033723400014933001",
			expected: "75691434360103372340200149330011690380000250000",
		},
		{
			input:    "00191667900002434790000002656973019362470618",
			expected: "00190000090265697301993624706185166790000243479",
		},
		{
			input:    "00195586200000773520000002464206011816073018",
			expected: "00190000090246420601618160730182558620000077352",
		},
		{
			input:    "75592896700003787000003389850761252543475984",
			expected: "75590003318985076125825434759848289670000378700",
		},
		{
			input:    "23791672000003249052028269705944177105205220",
			expected: "23792028296970594417671052052207167200000324905",
		},
		{
			input:    "23791672000003097902028060007024617500249000",
			expected: "23792028036000702461975002490003167200000309790",
		},
		{
			input:    "00000000000000000000000000000000000000000000",
			expected: "00000000000000000000000000000000000000000000000",
		},
	}

	for _, tt := range testValues {
		got := codigoBarrasToLinhaDigitavelCobranca(CodigoBarras(tt.input))
		result := string(got[:])

		if result != tt.expected {
			t.Fatalf("Expected %q got %q", tt.expected, result)
		}
	}
}
